博客
====

Git服务器部署
-------------

### 简述

为了能够在实验室部署Git服务，从Git官网，廖雪峰教程，以及菜鸟教程上学习了部署方法。

### 环境

HP Z840工作站(Ubuntu18.04Server)

### 统计数据

在服务器上部署Git

在Git服务器上建立仓库

添加开发用户

收集开并添加开发用户SSH_KEY

开发用户修改信息

详细步骤
--------

### 在服务器上部署Git

由于Ubuntu18.04Server直接内置安装的Git，这一步直接忽略

### 在Git服务器上建立仓库

首先我们得需要建立一个**裸仓库（bare repo）**

```bash
$ cd <YOUR_PATH>/git
$ mkdir project
$ cd project
$ mkdir .git
$ cd .git
$ git --bare init
```

Initialized empty Git repository in \<YOUR_PATH\>/git/test/.git/

到此为止，仓库就已经建立完毕了，但是显然这个仓库中神马都没有，需要有一个用户来为这个仓库推送第一个分支

### 用户添加仓库

以我的替身*辣鸡（SpicyChicken）*为例，假如*SpicyChicken*是我这个test仓库的开发者之一

首先，我们得把*SpicyChicken*的ssh公钥添加到我们服务器的**授权公钥（authorized_keys）**中，公钥的添加方法是：

```bash
$ ssh_keygen –t rsa
```

然后根据你保存的密钥目录中找到id_rsa.\*.pub公钥文件，将文件中的内容告诉服务器仓库创建者，创建者将其copy到服务器中/root/.ssh/authorized_keys新的一行中，现在*SpicyChicken*就能够访问本服务器内容了。

接下来SpicyChicken需要在他的电脑上添加远程仓库，并推送第一个分支：

```bash
$ git clone <GIT_USER>@<SERVER_HOST>:<YOUR_PATH>/git/test.git
$ git commit --allow-empty -m “initial commit”
[master (root-commit) <HEAD>] initial commit
$ git push origin master
```

总结
----

虽然博客写的比较简单，但Git里门道还是挺多的，Git官网教程中的remote命令我还没有具体的使用过，但其实并不影响日常使用了。
